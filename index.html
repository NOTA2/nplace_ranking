<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nPlace-Ranking</title>
</head>
<body>
    <h1>nPlace-Ranking</h1>
    <div id="result"></div>

    <script>
        function loadItem() {
            return fetch('./json/μ—λ°”λ…Έν—¤μ–΄.json')
                .then((response) => response.json())
        }

        // 0μ„ μ¶”κ°€ν•λ” λ³΄μ΅° ν•¨μμ…λ‹λ‹¤.
        function addZero(num) {
            return (num < 10 ? '0' : '') + num;
        }

        function getFormattedDate(d) {
            return d.getFullYear() + '-' + 
                addZero((d.getMonth() + 1)) + '-' + 
                addZero(d.getDate()) + ' ' + 
                addZero(d.getHours()) + ':' + 
                addZero(d.getMinutes()) + ':' + 
                addZero(d.getSeconds());
        }

        function getRanking(keyword) {
            return keyword.map(k => `
                <li>ν‚¤μ›λ“ : ${k.name}</li>
                <ul>
                    <li>λ°μ΄ν„° μμ„ : ${k.dataRank ? k.dataRank + 'μ„' : '20μ„ λ°–π¥²'}</li>
                    <li>κ΄‘κ³ λ¥Ό ν¬ν•¨ν• λ…Έμ¶ μμ„ : ${k.viewRankWithAd ? k.viewRankWithAd + 'μ„' : '20μ„ λ°–π¥²'}</li>
                    <li>ν‚¤μ›λ“ κ΄‘κ³  κ°―μ : ${k.viewAdCount}κ±΄</li>
                </ul>
            `).join('')
        }

        function displayItem(result) {
            const container = document.getElementById('result');

            container.innerHTML = `
                <h2>λ‚΄ κ°€κ² : ${result.myPlace}</h2>
                <h3>μ—…λ°μ΄νΈ μ‹κ° : ${getFormattedDate(new Date(result.lastUpdateTime))}</h3>
                <ul>
                    ${getRanking(result.keyword)}
                </ul>
            `
        }

        loadItem().then(result => {
            displayItem(result)
        })
    </script>
</body>
</html>